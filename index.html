<!DOCTYPE html>
<html>
<head>
	<title>GacomRecode</title>
	<script src="js/apidata.js"></script>
	<script src="js/react.js"></script>
	<script src="js/react-dom.js"></script>
	<script src="js/browser.min.js"></script>
	<script src="js/jquery-2.1.4.js"></script>
</head>
<body>
	<section id="react-mount">
	</section>

	<script type="text/babel">

		var HomePage = React.createClass({
			render: function(){
				return (
					<div>
						<MainHeader />
						<Directories />
					</div>
				)
			}
		});

		var MainHeader = React.createClass({
			render: function(){
				return (
					<section className="main-header-section">
						<div className="main-logo">
							<img src="https://www.goabroad.com/webroot/app/images/galogo.png.pagespeed.ce.-PXT91lYnX.png" />
						</div>
						<div className="right-nav">
							<ul>
								<li><a href="#">Choose an experience</a></li>
								<li><a href="#">How it works</a></li>
								<li><a href="#">Help me</a></li>
								<li><SignIn /></li>
							</ul>
						</div>
						<div>
							<img src=""/>
						</div>
					</section>
				)
			}
		});

		var Directories = React.createClass({
			getInitialState: function(){
				return {
					directoryIds: [6,2,4,3,11,12,9,7,8,5],
					directories: []
				}
			},

			componentWillMount: function(){
				this.fetchDirectories();
			},

			fetchDirectories: function() {
				// fetch via ajax 
				// url: https://api.goabroad.dev/directories?id=6,2,4,3,11,12,9,7,8,5
				this.setState({directories: apidata_directories.directories});
			},

			// getMainDirectories: function(){
			// 	let dir = this.state.directories;
			// 	return this.state.directories.map(function(item, index){
			// 		// if(true){
			// 			let ret = <li>{{item.name}}</li>;
			// 		// }
			// 	});
			// },

			getDirectories: function(indexStart, indexEnd){
				let dir = this.state.directoryIds;
				// console.log(dir.slice(0,4));
				return this.state.directories.map(function(item, index){

					if(dir.slice(indexStart,indexEnd).indexOf(item.id) !== -1)
						return <li key={index}><a href="#">{item.name}</a></li>;
				});
			},

			render: function(){
				
				return (
					<section className="directories-section">
						<ul className="first-directories">
							{this.getDirectories(0, 4)}
						</ul>
						<ul className="second-directories">
							{this.getDirectories(5, 9)}
						</ul>
					</section>
				)
			}
		});
 	
 		var SignIn = React.createClass({
 			auth: function(){

 			},
 			
 			validateForm: function(){

 			},

 			render: function(){
 				return (
 					<a href="#">
 						Sign In
 					</a>
 				)
 			}
 		})

		ReactDOM.render(<HomePage />, document.getElementById('react-mount'));
	</script>
</body>
</html>